
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/mdb_logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.5">
    
    
      
        <title>AI Tables in ClickHouse - MindsDB Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    

<!--iubenda privacy policy-->
<script type="text/javascript">
    var _iub = _iub || [];
    _iub.csConfiguration = {"lang":"en","ccpaAcknowledgeOnDisplay":true,"siteId":1832244,"countryDetection":true,"enableCcpa":true,"whitelabel":false,"cookiePolicyId":63309853, "banner":{ "acceptButtonDisplay":true,"customizeButtonDisplay":true,"position":"float-bottom-left","textColor":"#656565","backgroundColor":"#ffffff","rejectButtonDisplay":true,"acceptButtonColor":"#00af6c","acceptButtonCaptionColor":"white","customizeButtonColor":"#818181","customizeButtonCaptionColor":"white","rejectButtonColor":"#f77476","rejectButtonCaptionColor":"white" }};
</script>
<script type="text/javascript" src="//cdn.iubenda.com/cs/ccpa/stub.js"></script>
<script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script>
<!--end privacy policy-->

<!-- Google Tag Manager -->
<!--TODO: Read gtm value from mkdocs.yml-->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MNN47J3');</script>
<!-- End Google Tag Manager -->

    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#machine-learning-models-as-tables" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      
  
  <header class="md-header" data-md-component="header">
    <nav class="md-header-nav md-grid" aria-label="Header">
      <a href="../.." title="MindsDB Documentation" class="md-header-nav__button md-logo" aria-label="MindsDB Documentation">
        
  <img src="../../assets/mdb_logo_w.svg" alt="logo">

      </a>
      <label class="md-header-nav__button md-icon" for="__drawer">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
      </label>
      <div class="md-header-nav__title" data-md-component="header-title">
        
          <div class="md-header-nav__ellipsis">
            <span class="md-header-nav__topic md-ellipsis">
              MindsDB Documentation
            </span>
            <span class="md-header-nav__topic md-ellipsis">
              
                AI Tables in ClickHouse
              
            </span>
          </div>
        
      </div>
      
        <label class="md-header-nav__button md-icon" for="__search">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        </label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
      
        <div class="md-header-nav__source">
          
<a href="https://github.com/mindsdb/mindsdb/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mindsdb/mindsdb
  </div>
</a>
        </div>
      

      <a href="/Installing" title="Download" class="md-source nav-download-btn">
        <span>Download</span>
      </a>
    </nav>
  </header>

  <!-- Calendly badge widget begin -->
<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript"></script>
<script type="text/javascript">Calendly.initBadgeWidget({ url: 'https://calendly.com/c/BCDU2ZEFNG7JQD4M', text: 'Talk to our Engineers', color: '#00b06d', textColor: '#ffffff', branding: undefined });</script>
<!-- Calendly badge widget end -->
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MindsDB Documentation" class="md-nav__button md-logo" aria-label="MindsDB Documentation">
      
  <img src="../../assets/mdb_logo_w.svg" alt="logo">

    </a>
    MindsDB Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/mindsdb/mindsdb/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    mindsdb/mindsdb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
      
      <label class="md-nav__link" for="nav-1">
        Install
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="nav-1">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/windows/" class="md-nav__link">
        Windows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/linux/" class="md-nav__link">
        Linux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/macos/" class="md-nav__link">
        MacOS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/source/" class="md-nav__link">
        From source
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Connect your data
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Connect your data" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Connect your data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/mysql/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/postgresql/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/mariadb/" class="md-nav__link">
        MariaDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/clickhouse/" class="md-nav__link">
        ClickHouse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/mssql/" class="md-nav__link">
        Microsoft SQL Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/remote/" class="md-nav__link">
        Remote URL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/local/" class="md-nav__link">
        Local dataset
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/snowflake/" class="md-nav__link">
        Snowflake
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Train a model
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Train a model" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Train a model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/train/" class="md-nav__link">
        Create and train from Studio
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2" >
      
      <label class="md-nav__link" for="nav-3-2">
        Train from the Database
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Train from the Database" data-md-level="2">
        <label class="md-nav__title" for="nav-3-2">
          <span class="md-nav__icon md-icon"></span>
          Train from the Database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/mysql/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/postgresql/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/mariadb/" class="md-nav__link">
        MariaDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/clickhouse/" class="md-nav__link">
        ClickHouse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/mssql/" class="md-nav__link">
        Microsoft SQL Server
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        Evaluate model quality
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Evaluate model quality" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Evaluate model quality
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/quality/" class="md-nav__link">
        Evaluate from Studio
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        Query model
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Query model" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Query model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1" >
      
      <label class="md-nav__link" for="nav-5-1">
        Query from the Database
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Query from the Database" data-md-level="2">
        <label class="md-nav__title" for="nav-5-1">
          <span class="md-nav__icon md-icon"></span>
          Query from the Database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/mysql/" class="md-nav__link">
        MySQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/postgresql/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/mariadb/" class="md-nav__link">
        MariaDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/clickhouse/" class="md-nav__link">
        ClickHouse
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/mssql/" class="md-nav__link">
        Microsoft SQL Server
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../model/query/studio/" class="md-nav__link">
        Query from Studio
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
      
      <label class="md-nav__link" for="nav-6">
        Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mysql/" class="md-nav__link">
        AI Tables in MySQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb/" class="md-nav__link">
        AI Tables in MariaDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        AI Tables in PostgreSQL
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          AI Tables in ClickHouse
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        AI Tables in ClickHouse
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-great-deal-in-databases" class="md-nav__link">
    A great deal in databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-we-achieve-this" class="md-nav__link">
    How can we achieve this?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-mindsdb" class="md-nav__link">
    Why MindsDB?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-clickhouse" class="md-nav__link">
    Why ClickHouse?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-install-mindsdb" class="md-nav__link">
    How to install MindsDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-install-clickhouse" class="md-nav__link">
    How to install ClickHouse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-dataset-to-clickhouse" class="md-nav__link">
    Import dataset to ClickHouse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-mindsdb-to-clickhouse" class="md-nav__link">
    Connect MindsDB to ClickHouse
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../microsoft-sql-server/" class="md-nav__link">
        AI Tables in Microsoft SQL Server
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        MindsDB for Developers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MindsDB for Developers" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          MindsDB for Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1" >
      
      <label class="md-nav__link" for="nav-7-1">
        Python native
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python native" data-md-level="2">
        <label class="md-nav__title" for="nav-7-1">
          <span class="md-nav__icon md-icon"></span>
          Python native
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../BasicExample/" class="md-nav__link">
        Starter Example
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GoogleColab/" class="md-nav__link">
        Running on Google Colab
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../JupyterNotebook/" class="md-nav__link">
        Running on Jupyter Notebook
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../PredictorInterface/" class="md-nav__link">
        Predictor Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../FunctionalInterface/" class="md-nav__link">
        Functional Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../AdvancedExamples/" class="md-nav__link">
        Advanced usecases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Timeseries/" class="md-nav__link">
        Timeseries Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../features/DataSources/" class="md-nav__link">
        Data sources
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Config/" class="md-nav__link">
        Configuration Settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../server/SDKs/" class="md-nav__link">
        MindsDB SDK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../lightwood/info/" class="md-nav__link">
        Introduction to Lightwood
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../comparisons/ComparsionWithOtherLibraries/" class="md-nav__link">
        Comparison with other Libraries
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13" type="checkbox" id="nav-7-1-13" >
      
      <label class="md-nav__link" for="nav-7-1-13">
        Use Cases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Use Cases" data-md-level="3">
        <label class="md-nav__title" for="nav-7-1-13">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-1" type="checkbox" id="nav-7-1-13-1" >
      
      <label class="md-nav__link" for="nav-7-1-13-1">
        High-Tech & Manufacturing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="High-Tech & Manufacturing" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-1">
          <span class="md-nav__icon md-icon"></span>
          High-Tech & Manufacturing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../PredictiveMaintenance/" class="md-nav__link">
        Predictive Maintenance
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-2" type="checkbox" id="nav-7-1-13-2" >
      
      <label class="md-nav__link" for="nav-7-1-13-2">
        Financial Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Financial Services" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-2">
          <span class="md-nav__icon md-icon"></span>
          Financial Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CreditScoring/" class="md-nav__link">
        Credit Scoring
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-3" type="checkbox" id="nav-7-1-13-3" >
      
      <label class="md-nav__link" for="nav-7-1-13-3">
        Retail & Online
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Retail & Online" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-3">
          <span class="md-nav__icon md-icon"></span>
          Retail & Online
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CustomerLifetimeValue/" class="md-nav__link">
        Custiner Lifetime Value Optimization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../FraudDetection/" class="md-nav__link">
        Fraud Detection
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-4" type="checkbox" id="nav-7-1-13-4" >
      
      <label class="md-nav__link" for="nav-7-1-13-4">
        Health Care
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Health Care" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-4">
          <span class="md-nav__icon md-icon"></span>
          Health Care
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../PatientHealthOutcomes/" class="md-nav__link">
        Patient Health
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../MedicalDiagnosis/" class="md-nav__link">
        Medical Diagnosis
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-5" type="checkbox" id="nav-7-1-13-5" >
      
      <label class="md-nav__link" for="nav-7-1-13-5">
        Travel
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Travel" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-5">
          <span class="md-nav__icon md-icon"></span>
          Travel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../HotelBooking/" class="md-nav__link">
        Hotel Booking Demand
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-1-13-6" type="checkbox" id="nav-7-1-13-6" >
      
      <label class="md-nav__link" for="nav-7-1-13-6">
        Telecomunications
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Telecomunications" data-md-level="4">
        <label class="md-nav__title" for="nav-7-1-13-6">
          <span class="md-nav__icon md-icon"></span>
          Telecomunications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ChurnReduction/" class="md-nav__link">
        Customer Churn Reduction
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        Contribution and Community
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contribution and Community" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          Contribution and Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        Join our community
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../InsideMindsDB/" class="md-nav__link">
        Inside MindsDB
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-great-deal-in-databases" class="md-nav__link">
    A great deal in databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-we-achieve-this" class="md-nav__link">
    How can we achieve this?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-mindsdb" class="md-nav__link">
    Why MindsDB?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-clickhouse" class="md-nav__link">
    Why ClickHouse?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-install-mindsdb" class="md-nav__link">
    How to install MindsDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-install-clickhouse" class="md-nav__link">
    How to install ClickHouse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-dataset-to-clickhouse" class="md-nav__link">
    Import dataset to ClickHouse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-mindsdb-to-clickhouse" class="md-nav__link">
    Connect MindsDB to ClickHouse
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mindsdb/mindsdb/edit/master/docs/tutorials/clickhouse.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="machine-learning-models-as-tables">Machine Learning Models as Tables</h1>
<p>We will start this article by raising one of the most asked questions regarding Machine Learning, What is the difference between Machine Learning and Artificial Intelligence? When we think about machine learning we can think about it as a subset of Artificial Intelligence. In simple words, the idea behind machine learning is to enable machines to learn by themselves, by using small to large datasets and finding common patterns inside the data. That said, data is the core of any machine learning algorithm and having access to the data is one of the crucial steps for machine learning success. This will bring us to the second question, Where data lives these days?</p>
<h4 id="a-great-deal-in-databases">A great deal in databases</h4>
<p>With the increase of data in volume, variety, velocity in today's databases. Is there a better place to bring machine learning to, than being able to do machine learning right in the databases?We believe that database users meet the most important aspect of applied machine learning, which is to understand what predictive questions are important and what data is relevant to answer those questions. Additionally, adding the statistical analysis for creating the most appropriate model to that, will yield the best combination which is auto machine learning straight from the database. Bringing AutoML to those that know data best can significantly augment the capacity to solve important problems.  That’s why we decided to build a seamless integration with Clickhouse, in a way such that any ClickHouse user can create, train and test machine learning models with the same knowledge they have of Structured Query Language (SQL).</p>
<h4 id="how-can-we-achieve-this">How can we achieve this?</h4>
<p>We make use of ClickHouse’s neat capabilities of accessing external tables as if they were internal tables. As such, the integration of these models is painless and transparent allowing us to:</p>
<ul>
<li>Exposing machine learning models like tables that can be queried. You simply SELECT what you want to predict and you pass in the WHERE statement the conditions for the prediction.</li>
<li>Automatically, build, test and train machine learning models with a simple INSERT statement, where you specify what you want to learn and from what query.</li>
</ul>
<h3 id="why-mindsdb">Why MindsDB?</h3>
<p>MindsDB is a fast-growing Open Source AutoML framework with built-in explainability - a unique visualization capability that helps better understand and trust the accuracy of predictions. With MindsDB, developers can build, train and test Machine Learning models, without needing the help of a Data Scientist/Machine Learning Engineer. It is different from typical AutoML frameworks in that MindsDB has a strong focus on trustworthiness by means of explainability, allowing users to get valuable insights into why and how the model is reaching its predictions.</p>
<h3 id="why-clickhouse">Why ClickHouse?</h3>
<p>Speed and efficiency are key to ClickHouse. ClickHouse can process queries up to 100 times faster than traditional databases and is the perfect solution for Digital advertising, E-commerce, Web and App analytics, Monitoring, Telecommunications analytics. In the rest of this article, we will try to describe in detail the above points with integration between MindsDB, as an Auto-Machine Learning framework and ClickHouse, as an OLAP Database Management System.</p>
<h3 id="how-to-install-mindsdb">How to install MindsDB</h3>
<p>Installing MindsDB is as easy as any other Python package. All you need for installation are a Python version greater than 3.6.x and around 1 GB available disk space. Other than that you just use pip or pip3 to install it as:</p>
<div class="highlight"><pre><span></span><code>pip install mindsdb
</code></pre></div>
<p>For more detailed installation instructions please check out installation docs. If you got an error or have any questions, please post them to our support forum community.mindsdb.com</p>
<h3 id="how-to-install-clickhouse">How to install ClickHouse</h3>
<p>If you already have ClickHouse installed and your analytics data saved then you’re ready to start playing with MindsDB, so just skip to the Connect MindsDB to ClickHouse section.If not, ClickHouse can run on any Linux or Mac OS X with x86_64 CPU architecture. Depending on your machine check out available installation options. Once the installation is done, you can start the server as a daemon:</p>
<div class="highlight"><pre><span></span><code>sudo service clickhouse-server start
</code></pre></div>
<p>Starting the server will not display any output, so you can execute:</p>
<div class="highlight"><pre><span></span><code>sudo service clickhouse-server status
</code></pre></div>
<p>to check that the ClickHouse is running successfully. Next, use clickhouse-client to connect to it:clickhouse-clientIf you get Code: 516. DB::Exception: Received from localhost:9000. DB::Exception: default: Authentication failed:  error you will need to provide the default password that you added during the installation process:</p>
<div class="highlight"><pre><span></span><code>clickhouse-client --password ******
</code></pre></div>
<p>That’s it. You have successfully connected to your local ClickHouse server.</p>
<h3 id="import-dataset-to-clickhouse">Import dataset to ClickHouse</h3>
<p>As with any other database management system, ClickHouse also groups tables into databases. To list the available databases you can run a <code>show databases</code>  query that will display the default databases:</p>
<div class="highlight"><pre><span></span><code>SHOW DATABASES;
</code></pre></div>
<p>For storing the data, we will create a new database called data:</p>
<div class="highlight"><pre><span></span><code>CREATE DATABASE IF NOT EXISTS data;
</code></pre></div>
<p>The dataset that we will use in this tutorial provides time-series air pollution measurement information from data.seoul. Let’s create a table and store the data in ClickHouse. Note that you can follow up to this tutorial with different data, just edit the example queries in line with your data.</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">pollution_measurement</span><span class="p">(</span>
    <span class="o">`</span><span class="n">Measurement</span> <span class="nb">date</span><span class="o">`</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="o">`</span><span class="n">Station</span> <span class="n">code</span><span class="o">`</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">Address</span> <span class="n">String</span><span class="p">,</span>
    <span class="n">Latitude</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="n">Longitude</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="n">SO2</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">NO2</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">O3</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">CO</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">PM10</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="o">`</span><span class="n">PM2</span><span class="p">.</span><span class="mi">5</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">MergeTree</span><span class="p">()</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="p">(</span><span class="o">`</span><span class="n">Station</span> <span class="n">code</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Measurement</span> <span class="nb">date</span><span class="o">`</span><span class="p">);</span>
</code></pre></div>
<p>Note that we need to use backticks to escape the special characters in the column name. The parameters added to the Decimal32(p) are the precision of the decimal digits for e.g Decimal32(5) can contain numbers from  -99999.99999 to 99999.99999. The Engine = MergeTree, specify the type of the table in ClickHouse. To learn more about all of the available table engines head over to the table-engines documentation. Lastly, what we need to do is to import the data inside the pollution_measurement table:</p>
<div class="highlight"><pre><span></span><code>clickhouse-client --date_time_input_format=best_effort --query=&quot;INSERT INTO data.pollution_measurement  FORMAT CSV&quot; &lt; Measurement_summary.csv
</code></pre></div>
<p>The --date_time_input_format=best_effort enables the datetime parser to parse the basic and all ISO 8601 date and time formats. The pollution_measurement data should be added to the data.pollution_measurement table. To make sure it is successfully added execute SELECT query:</p>
<div class="highlight"><pre><span></span><code>SELECT * FROM data.pollution_measurement LIMIT 5;‍
</code></pre></div>
<p><img alt="SELECT DB" src="/assets/tutorials/aitables-clickhouse/db-select.png" /></p>
<p>We are halfway there! We have successfully installed MindsDB and ClickHouse and have the data saved in the database. Now, we will use MindsDB to connect to ClickHouse and train and query Machine Learning models from the air pollution measurement data. If you don’t want to install ClickHouse locally, ClickHouse Docker image is a good solution.</p>
<h3 id="connect-mindsdb-to-clickhouse">Connect MindsDB to ClickHouse</h3>
<p>Let’s start MindsDB:</p>
<div class="highlight"><pre><span></span><code>python3 -m mindsdb --api mysql --config config.json
</code></pre></div>
<p>The --api parameter specifies the type of API to use (mysql). The --config specifies the location of the configuration file. The minimum required configuration for connecting to ClickHouse is:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;api&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;http&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;47334&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;mysql&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;47335&quot;</span><span class="p">,</span>
            <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;root&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;config_version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.3&quot;</span><span class="p">,</span>
    <span class="nt">&quot;debug&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;integrations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;default_clickhouse&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;database_name&quot;</span><span class="p">:</span> <span class="s2">&quot;default_clickhouse&quot;</span><span class="p">,</span>
            <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
            <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;pass&quot;</span><span class="p">,</span>
            <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8123</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;clickhouse&quot;</span><span class="p">,</span>
            <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;log&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;level&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;console&quot;</span><span class="p">:</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;storage_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/storage&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>In the default_clickhouse key, include the values for connecting to ClickHouse. In the mindsdb_native storage_dir add a path to the location where MindsDB will save some configuration as (metadata and .pickle files). The Running on http://0.0.0.0:47334/ (Press CTRL+C to quit) message will be displayed if MindsDB is successfully started. That means MindsDB server is running and listening on localhost:47334.First, when MindsDB starts it creates a database and tables inside the ClickHouse. The database created is of ENGINE type MySQL(connection), where 'connection' is established from the parameters provided inside the config.json. </p>
<div class="highlight"><pre><span></span><code>USE mindsdb;
SHOW TABLES;
</code></pre></div>
<p><img alt="SHOW TABLES" src="/assets/tutorials/aitables-clickhouse/show-tables.png" /></p>
<p>The default table created inside mindsdb database will be predictors where MindsDB shall keep information about the predictors(ML models), training status, accuracy, 
target variable and additional training options.</p>
<div class="highlight"><pre><span></span><code>DESCRIBE TABLE predictors;
</code></pre></div>
<p><img alt="Describe TABLE" src="/assets/tutorials/aitables-clickhouse/describe-table.png" /></p>
<p>When a user creates a new model or makes a query to any table, the query is sent by MySQL text protocol to MindsDB, where it hits the MindsDB’s API’s responsible for training, analyzing, querying the models.</p>
<p><img alt="MindsDB and ClickHouse" src="/assets/tutorials/aitables-clickhouse/mdb-ch.png" /></p>
<p>Now, we have everything ready to create a model. We are going to use the data inside the pollution_measurement table to predict the Sulfur Dioxide(SO2) in the air. Creating the model is as simple as writing the INSERT query, where we will provide values for the few required attributes. Before creating the predictor make sure mindsdb database is used:</p>
<div class="highlight"><pre><span></span><code>use mindsdb;

INSERT INTO predictors(name, predict, select_data_query) VALUES (&#39;airq_predictor&#39;, &#39;SO2&#39;, &#39;SELECT * FROM data.pollution_measurement where SO2 &gt; 0 ORDER BY rand() LIMIT 10000&#39;);
</code></pre></div>
<p>The Predictor in MindsDB’s words means the Machine Learning model. The columns values for creating the predictor(model) are:</p>
<ul>
<li>name (string) - the name of the predictor.predict (string) -  the feature you want to predict, in this example it will be SO2.</li>
<li>select_data_query (string) - the SELECT query that will ingest the data to train the model.</li>
<li>training_options (dictionary) - optional value that contains additional training parameters. For a full list of the parameters check the mindsdb.docs.</li>
</ul>
<p>In the background, the INSERT to predictors query will call mindsdb-native that will do a black-box analysis and start a process of extracting, analyzing, and transforming the data. It will take some time to train the model depending on the data size, columns, columns type etc, so to keep it faster we are using 5000 random columns by adding ORDERED BY rand() LIMIT 10000 to the SELECT query. You should see a message like:</p>
<div class="highlight"><pre><span></span><code>INSERT INTO predictors (name, predict_cols, select_data_query) VALUESOk.1 rows in set. Elapsed: 0.824 sec. 
</code></pre></div>
<p>To check if the training of the model successfully finished, you can run:</p>
<div class="highlight"><pre><span></span><code>SELECT * FROM predictors WHERE name=&#39;airq_predictor&#39;‍
</code></pre></div>
<p><img alt="MindsDB predictor" src="/assets/tutorials/aitables-clickhouse/select-predictors.png" /></p>
<p>Status complete means that the model training has finished successfully. Now, let’s create predictive analytics from the data by querying the created predictor. The idea was to predict the value of Sulfur Dioxide in the Seoul air station depending on the different measured parameters as NO2, O3, CO, location etc. </p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">SO2</span> <span class="k">as</span> <span class="n">predicted</span><span class="p">,</span> <span class="n">SO2_confidence</span> <span class="k">as</span> <span class="n">confidence</span> <span class="k">from</span> <span class="n">airq_predictor</span>
<span class="k">WHERE</span> <span class="n">NO2</span><span class="o">=</span><span class="mi">0</span><span class="p">.</span><span class="mi">005</span> <span class="k">AND</span> <span class="n">CO</span><span class="o">=</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span> <span class="k">AND</span> <span class="n">PM10</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
</code></pre></div>
<p><img alt="MindsDB query" src="/assets/tutorials/aitables-clickhouse/select-where.png" /></p>
<p>Now you can see that MindsDB predicted that the value of Sulfur Dioxide is 0.00115645 with around 98% confidence.To get additional information about the predicted value and confidence, we should include the explain column. In that case, the MindsDB’s explain functionality apart from confidence can provide additional information such as prediction quality, confidence interval, missing information for improving the prediction etc. We can extend the query and include an additional column for explanation information:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> 
    <span class="n">SO2</span> <span class="k">AS</span> <span class="n">predicted</span><span class="p">,</span>
    <span class="n">SO2_confidence</span> <span class="k">AS</span> <span class="n">confidence</span><span class="p">,</span>
    <span class="n">SO2_explain</span> <span class="k">AS</span> <span class="n">info</span>
<span class="k">FROM</span> <span class="n">airq_predictor</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="n">NO2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">CO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">PM10</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>
<p><img alt="MindsDB query info" src="/assets/tutorials/aitables-clickhouse/select-info.png" /></p>
<p>Now we get additional information: </p>
<div class="highlight"><pre><span></span><code>{
    &quot;predicted_value&quot;: 0.001156540079952395,
    &quot;confidence&quot;: 0.9869,
    &quot;prediction_quality&quot;: &quot;very confident&quot;,
    &quot;confidence_interval&quot;: [0.003184904620383531, 0.013975553923630717],
    &quot;important_missing_information&quot;: [&quot;Station code&quot;, &quot;Latitude&quot;, “O3”],
    &quot;confidence_composition&quot;: {
        &quot;CO&quot;: 0.006
    },
    &quot;extra_insights&quot;: {
        &quot;if_missing&quot;: [{
            &quot;NO2&quot;: 0.007549311956155897
        }, {
            &quot;CO&quot;: 0.005459383721227349
        }, {
            &quot;PM10&quot;: 0.003870252306568623
        }]
    }
}
</code></pre></div>
<p>By looking at the new information we can see that MindsDB is very confident about the quality of this prediction. The range of values where the predicted value lies within is determined inside the confidence interval. Also, the extra insights are providing SO2 value in a case where some of the included features (in WHERE clause) are not provided. MindsDB thinks that Station code and Latitude and O3 are very important features for more precise prediction so those values shall be included in the WHERE clause. Let’s try including Station code and see the new predictions:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> 
    <span class="n">SO2</span> <span class="k">AS</span> <span class="n">predicted</span><span class="p">,</span>
    <span class="n">SO2_confidence</span> <span class="k">AS</span> <span class="n">confidence</span>
<span class="k">FROM</span> <span class="n">airq_predictor</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="n">NO2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">CO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">PM10</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="o">`</span><span class="n">Station</span> <span class="n">code</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;32&#39;</span><span class="p">)</span> <span class="k">AND</span> <span class="o">`</span><span class="n">PM2</span><span class="p">.</span><span class="mi">5</span><span class="o">`=</span><span class="mi">50</span>
</code></pre></div>
<p><img alt="MindsDB query info" src="/assets/tutorials/aitables-clickhouse/select-infoq.png" /></p>
<p>Now the predicted value has changed by adding the feature that MindsDB thought is quite important for better prediction. Additionally we can try and predict the Sulfur Dioxide in the air in some future date. What we can do is just include the Measurement date value inside WHERE clause for the specific date we want to get prediction e.g :</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> 
    <span class="n">SO2</span> <span class="k">AS</span> <span class="n">predicted</span><span class="p">,</span>
    <span class="n">SO2_confidence</span> <span class="k">AS</span> <span class="n">confidence</span>
<span class="k">FROM</span> <span class="n">airq_predictor</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="n">NO2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">005</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">CO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">PM10</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="o">`</span><span class="n">Station</span> <span class="n">code</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;32&#39;</span><span class="p">)</span> <span class="k">AND</span> <span class="o">`</span><span class="n">PM2</span><span class="p">.</span><span class="mi">5</span><span class="o">`=</span><span class="mi">50</span> <span class="k">AND</span> <span class="o">`</span><span class="n">Measurement</span> <span class="nb">date</span><span class="o">`=</span><span class="err">’</span><span class="mi">2020</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">03</span> <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="err">’</span>
</code></pre></div>
<p><img alt="MindsDB query info" src="/assets/tutorials/aitables-clickhouse/select-info1.png" /></p>
<p>Or few weeks later as:</p>
<p><img alt="MindsDB query info" src="/assets/tutorials/aitables-clickhouse/select-info2.png" /></p>
<p>At the end, the whole flow was as simple as seeing MindsDB as a database inside ClickHouse and executing queries for INSERT and SELECT directly from it.</p>
<p><img alt="MindsDB diagram" src="/assets/tutorials/aitables-clickhouse/select-diagram.png" /></p>
<p>If you follow up to this tutorial with your own data, we are happy to hear about how MindsDB has come in useful to you. Everything that we did in this tutorial will be available through the MindsDB’s Graphical User Interface MindsDB Scout in the next release. That means with a few clicks on MindsDB Scout you can successfully train ML models from your ClickHouse database too.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
      
    </div>
    
      <script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>